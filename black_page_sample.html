<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <title>CAULY-10646 (ES5-Final-Test)</title>
        <style>
            * { margin: 0; padding: 0; box-sizing: border-box; overflow: hidden; }
            html, body { width: 100%; height: 100%; }
            body { background-color: #010101; }
            .container { position: relative; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; cursor: pointer; }
            .container>img { border: 0 none; max-width: 100%; width: 100%; height: auto; object-fit: contain; }
        </style>
    </head>
    <body>
        <div class="container">
            <img/>
        </div>
        <script>
            function loadedFunc(fsn) {
        var container = document.querySelector(".container");
        var imgTag = document.querySelector(".container>img");
        var imgUrl = null;
        try {
            var rawImgUrl = fsn.getUrlParam("img_url", null, null);
            if (rawImgUrl) {
                imgUrl = decodeURIComponent(rawImgUrl);
                if (imgUrl.indexOf("http://image.cauly.co.kr/") === 0) {
                    imgUrl = imgUrl.replace("http://image.cauly.co.kr/", "https://image.cauly.co.kr/");
                }
            }
        } catch (e) {
            console.error("img_url 처리 중 오류:", e);
        }
        if (imgUrl == null || imgUrl === "null") {
            console.error("img_url 파라미터는 필수값입니다.");
        } else {
            fsn.imgLoad(imgTag, imgUrl, function(bgColor) {
                if (bgColor) {
                    document.body.style.backgroundColor = bgColor;
                }
            });
        }
        var clkUrl = null;
        try {
            var rawClkUrl = fsn.getUrlParam("clk_url", null, null);
            if (rawClkUrl) {
                clkUrl = decodeURI(rawClkUrl);
            }
        } catch (e) {
            console.error("clk_url 처리 중 오류:", e);
        }
        if (clkUrl == null || clkUrl === "null") {
            console.error("clk_url 파라미터는 필수값입니다.");
        } else {
            fsn.addFsnEventListener(container, false, true, function(evt) {
                return clkUrl;
            });
            fsn.xBackgroundClickUrl(clkUrl);
        }
    }

    function initFsnAdtmplt() {
        // --- 이 부분의 경로가 수정되어야 합니다 ---
        var libUrl = "./fsn_adtmplt_001"; // 로컬 경로로 수정
        
        var linkElem = document.createElement("link");
        linkElem.rel = "stylesheet";
        linkElem.type = "text/css";
        linkElem.href = libUrl + ".css"; // .css 파일도 필요하다면 같은 위치에 있어야 합니다.
        document.head.appendChild(linkElem);

        var scriptElem = document.createElement("script");
        scriptElem.type = "text/javascript";
        scriptElem.src = libUrl + ".js"; // 수정된 js 파일을 불러옵니다.
        scriptElem.onload = function() {
            if (typeof FsnAdtmplt !== 'undefined') {
                new FsnAdtmplt(loadedFunc);
            } else {
                console.error('FsnAdtmplt 라이브러리를 로드하지 못했습니다.');
            }
        };
        scriptElem.onerror = function() {
            console.error('수정된 fsn_adtmplt_001.js 로드 실패!');
        };
        document.head.appendChild(scriptElem);
    }
    document.addEventListener("DOMContentLoaded", initFsnAdtmplt);
        </script>
    </body>
</html>
